/*! For license information please see wm.min.js.LICENSE.txt */
(()=>{var e={457:()=>{"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),i=1;i<arguments.length;i++){var s=arguments[i];if(null!=s)for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(n[l]=s[l])}return n},writable:!0,configurable:!0}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1})}},t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}(()=>{"use strict";n(457);var e=null,t={x:0,y:0};function i(n,i){if("destroy"==i){if(!n._drag)return;return n.removeEventListener("mousedown",n._drag._evt_mousedown),void delete n._drag}if(n._drag)return;const s={};Object.assign(s,{ondragstart:null,ondrag:null,ondragend:null,cancel:""},i),s.cancel=s.cancel.split(","),s._evt_mousedown=function(i){for(let e=0;e<s.cancel.length;e++){const t=s.cancel[e];let n=i.target;for(;null!=n;){if(n.matches(t))return;n=n.parentElement}}var l=i.target.getBoundingClientRect(),o=i.clientX-l.left,a=i.clientY-l.top;t={x:o,y:a},e=n,n.querySelectorAll("iframe").forEach((e=>{e._drag_pointerEvents_og=e.style.pointerEvents,e.style.pointerEvents="none"})),s.ondragstart?.call(s,n,{rx:o+"px",ry:a+"px"})},n._drag=s,n.addEventListener("mousedown",s._evt_mousedown)}function s(e,t){return new Promise((n=>{const i=e instanceof HTMLElement?e:document.querySelector(e);i.classList.add(t),i.addEventListener("animationend",(()=>{i.classList.remove(t),n()}),{once:!0})}))}window.addEventListener("load",(()=>{document.body.addEventListener("mouseup",(function(){if(!e)return;const t=e.getBoundingClientRect();e.querySelectorAll("iframe").forEach((e=>{e.style.pointerEvents=e._drag_pointerEvents_og,delete e._drag_pointerEvents_og})),e._drag.ondragend?.call(e._drag,e,{x:t.x+"px",y:t.y+"px"}),e=null})),document.body.addEventListener("mousemove",(function(n){if(!e)return;const i=n.x-t.x+"px",s=n.y-t.y+"px";e._drag.ondrag?.call(e._drag,e,{x:i,y:s}),e.style.left=i,e.style.top=s}))}));var l=0,o=0,a=0,r=0,d=null,h="se",c=null;function m(e,t,n){c=t,h=n,l=e.clientX,o=e.clientY,a=parseInt(document.defaultView.getComputedStyle(c).width,10),r=parseInt(document.defaultView.getComputedStyle(c).height,10),d=c.getBoundingClientRect(),c.style.userSelect="none",document.documentElement.addEventListener("mousemove",u,!1),document.documentElement.addEventListener("mouseup",w,!1),c._rsz.onresizestart?.call(c._rsz,{startX:l,startY:o,startWidth:a,startHeight:r})}function u(e){let t={width:a+e.clientX-l,height:r+e.clientY-o};"nw"==h?t={width:a-e.clientX+l,height:r-e.clientY+o}:"ne"==h?t={width:a+e.clientX-l,height:r-e.clientY+o}:"n"==h?t.height=r-e.clientY+o:"sw"==h?t={width:a-e.clientX+l,height:r+e.clientY-o}:"w"==h&&(t.width=a-e.clientX+l);let n=!0,i=!0;null!=c._rsz.minHeight&&t.height<c._rsz.minHeight&&(i=!1),null!=c._rsz.minWidth&&t.width<c._rsz.minWidth&&(n=!1),"se"==h?(n&&(c.style.width=a+e.clientX-l+"px"),i&&(c.style.height=r+e.clientY-o+"px")):"ne"==h?(n&&(c.style.width=a+e.clientX-l+"px"),i&&(c.style.height=r-e.clientY+o+"px",c.style.top=o+e.clientY-o+"px")):"e"==h&&n?c.style.width=a+e.clientX-l+"px":"s"==h&&i?c.style.height=r+e.clientY-o+"px":"sw"==h?(n&&(c.style.left=d.left+e.clientX-l+"px",c.style.width=a-e.clientX+l+"px"),i&&(c.style.height=r+e.clientY-o+"px")):"w"==h&&n?(c.style.left=d.left+e.clientX-l+"px",c.style.width=a-e.clientX+l+"px"):"nw"==h?(n&&(c.style.left=d.left+e.clientX-l+"px",c.style.width=a-e.clientX+l+"px"),i&&(c.style.height=r-e.clientY+o+"px",c.style.top=o+e.clientY-o+"px")):"n"==h&&i&&(c.style.height=r-e.clientY+o+"px",c.style.top=o+e.clientY-o+"px"),c._rsz.onresize?.call(c._rsz,t)}function w(e){c.style.userSelect="",document.documentElement.removeEventListener("mousemove",u,!1),document.documentElement.removeEventListener("mouseup",w,!1),c._rsz.onresizeend?.call(c._rsz,{width:a+e.clientX-l,height:r+e.clientY-o}),c=null}class g{constructor(e){this.baseElement=document.createElement("div"),this.registered=!1,this.shown=!1,this.maximized=!1,this.wm=e,this.id=0,this.type="normal",this.onopen=null,this.onclose=null,this.onshown=null,this.onmaximize=null,this.onminimize=null,this.onrestore=null,this.onactivate=null,this.ondeactivate=null,this.ondragstart=null,this.ondragend=null,this.ondrag=null}_createWindow(e){this.baseElement.classList.add("wm-window"),this.baseElement.style.zIndex=this.wm.zIndexStartOffset+this.id+1;const t=document.createElement("div");t.classList.add("titlebar");const n=document.createElement("span");n.classList.add("title");const i=document.createElement("div");i.classList.add("control-box"),i.insertAdjacentHTML("beforeend",'<button role="minimize">─</button><button role="maximize">▢</button><button role="close">✕</button>'),e.resizable&&(n.addEventListener("dblclick",(()=>{this.toggleMaximize()})),i.querySelector('button[role="maximize"]').addEventListener("click",(()=>{this.toggleMaximize()}))),i.querySelector('button[role="minimize"]').addEventListener("click",(()=>{this.hide(),this.onminimize?.call()})),i.querySelector('button[role="close"]').addEventListener("click",(()=>{this.onclose?.call(),this.close()})),t.appendChild(n),t.appendChild(i);const s=document.createElement("div");s.classList.add("content"),this.baseElement.style.position="fixed",this.baseElement.style.height="string"==typeof e.height?e.height:e.height+"px",this.baseElement.style.width="string"==typeof e.width?e.width:e.width+"px",this.baseElement.style.left="string"==typeof e.x?e.x:e.x+"px",this.baseElement.style.top="string"==typeof e.y?e.y:e.y+"px",n.innerText=e.title,this.baseElement.appendChild(t),this.baseElement.appendChild(s),this.baseElement.addEventListener("mousedown",(e=>{this.activate()})),this.baseElement.addEventListener("click",(e=>e.stopPropagation())),e.draggable&&this.setDraggable(),this.minWidth=e.minWidth,this.minHeight=e.minHeight,e.resizable&&this.setResizable()}_registerWindow(){this.wm.container.appendChild(this.baseElement),this.registered=!0}setDraggable(e=!0){i(this.baseElement,e?{cancel:".content,.control-box,.ui-resizable-handle,.wm-resizer",ondragstart:(e,t)=>{this.wm.behavior.applyDragStyles&&this.baseElement.classList.add("dragging"),this.ondragstart?.call(this,e,t)},ondragend:(e,t)=>{this.wm.behavior.applyDragStyles&&this.baseElement.classList.remove("dragging"),this.ondragend?.call(this,e,t)},ondrag:(e,t)=>{this.ondrag?.call(this,e,t)}}:"destroy")}setResizable(e=!0){!function(e,t){const n=e instanceof HTMLElement?e:document.querySelector(e);if("destroy"==t){if(!n._rsz)return;for(let e of n.children);return void(n._rsz=null)}if(n._rsz)return;const i={};Object.assign(i,{onresizestart:null,onresize:null,onresizeend:null,handles:"se,ne,e,s,sw,w,nw,n",minHeight:null,minWidth:null},t),i.handles=i.handles.split(","),n._rsz=i;for(let e of i.handles){const t=document.createElement("div");t.classList.add("wm-resizer"),t.classList.add(e),n.appendChild(t),t.addEventListener("mousedown",(t=>m(t,n,e)),!1)}}(this.baseElement,e?{onresizestart:()=>{this.activate()},minWidth:this.minWidth,minHeight:this.minHeight}:"destroy")}toggleMaximize(){this.maximized?(this.baseElement.style.height=this._ogBounds.height,this.baseElement.style.width=this._ogBounds.width,this.baseElement.style.left=this._ogBounds.x,this.baseElement.style.top=this._ogBounds.y,this.baseElement.style.position="fixed",this.baseElement.style.boxShadow="",this.baseElement.classList.remove("maximized"),this.maximized=!1,this.setDraggable(!0),this.baseElement.querySelectorAll(".wm-resizer").forEach((e=>e.style.display="")),this.onrestore?.call()):(this._ogBounds={height:this.baseElement.style.height,width:this.baseElement.style.width,x:this.baseElement.style.left,y:this.baseElement.style.top},this.baseElement.style.height="100%",this.baseElement.style.width="100%",this.baseElement.style.left="0px",this.baseElement.style.top="0px",this.baseElement.style.position="relative",this.baseElement.style.boxShadow="none",this.baseElement.classList.add("maximized"),this.maximized=!0,this.setDraggable(!1),this.baseElement.querySelectorAll(".wm-resizer").forEach((e=>e.style.display="none")),this.onmaximize?.call())}getWindowRect(){const e=this.baseElement.getBoundingClientRect();return{x:e.x,y:e.y,height:e.height,width:e.width}}getContentContainer(){return this.baseElement.querySelector(".content")}setHtml(e){const t=this.getContentContainer();for(;t.firstChild;)t.removeChild(t.firstChild);t.innerHTML=e}activate(){this.baseElement.classList.contains("active")||(this.wm.activate(this),this.onactivate?.call())}setTitle(e){this.baseElement.querySelector(".titlebar>.title").innerText=e}show(){this.shown||(this.registered||(this._registerWindow(),this.onopen?.call(),this.wm.animations.wndOpen&&s(this.baseElement,this.wm.animations.wndOpen)),this.baseElement.style.display="flex",this.shown=!0,this.onshown?.call(),this.activate())}hide(){this.shown&&(this.baseElement.style.display="none",this.shown=!1)}close(){this.wm.animations.wndClose?s(this.baseElement,this.wm.animations.wndClose).then((()=>this.wm.destroy(this))):this.wm.destroy(this)}setControlBoxStyle(e){const t={};Object.assign(t,{close:!0,maximize:!0,minimize:!0},e);const n=this.baseElement.querySelector(".control-box"),i=n.querySelector('button[role="close"]'),s=n.querySelector('button[role="minimize"]'),l=n.querySelector('button[role="maximize"]');i.style.display=t.close?"":"none",s.style.display=t.minimize?"":"none",l.style.display=t.maximize?"":"none"}}const p={util:{draggable:i,animate:s},WindowManager:class{constructor(e){if(e instanceof HTMLElement||(e=document.querySelector(e)),!e)throw new Error("The specified container element is not valid.");if(e._wm)throw new Error("The specified container already has a window manager.");this.container=e,this.windows=[],this.zIndexStartOffset=10,this.animations={wndOpen:null,wndClose:null},this.behavior={applyDragStyles:!1,useSimpleGraphics:!1},this.onwindowcreate=null,this.onwindowdestroy=null,this.onwindowactivate=null,this.onwindowdeactivate=null,this._createdWindows=0,e._wm={},this._setupContainerEvents()}_setupContainerEvents(){this.container.addEventListener("click",(e=>{this.deactivateAll()}))}createWindow(e){const t={};Object.assign(t,{title:"Untitled",height:315,width:450,minHeight:200,minWidth:200,x:10,y:10,resizable:!0,draggable:!0},e);const n=new g(this,t);return n.id=this._createdWindows++,n._createWindow(t),this.windows.push(n),this.onwindowcreate?.call(this,n,t),n}findWindow(e){return this.windows.find((t=>t?.id==e))}showDebugInfo(){if(this._debugContainer)return;this._debugContainer=document.createElement("div"),this._debugContainer.classList.add("wm-ui-dbginfo");const e=document.createElement("b");e.innerText="wm.js alpha",e.style.textDecoration="underline",e.style.display="block",this._debugContainer.appendChild(e);const t=document.createElement("span");this._debugContainer.appendChild(t),this.container.appendChild(this._debugContainer),this._updateDebugInfo(),this._debugProc=setInterval((()=>this._updateDebugInfo()),500)}_updateDebugInfo(){const e=this.container.getBoundingClientRect();this._debugContainer.querySelector("span").innerHTML="\n<u>:: General Information</u>\n <b>Created Windows:</b> "+this._createdWindows+"\n <b>Loaded Windows:</b> "+this.windows.length+"\n <b>Active Window:</b> "+(()=>{const e=this.getActiveWindow();if(e){const t=e.getWindowRect();return e.id+" => ["+Math.round(t.width)+"x"+Math.round(t.height)+"] ("+Math.round(t.x)+", "+Math.round(t.y)+")"}return"null"})()+"\n <b>WM Area: </b>"+Math.round(e.width)+"x"+Math.round(e.height)+"\n\n<u>:: Features</u>\n <b>Fast Window Drag</b>: "+(this.behavior.applyDragStyles?"Yes":"No")+"\n <b>Simple Graphics Mode</b>: "+(this.behavior.useSimpleGraphics?"Yes":"No")}getActiveWindow(){let e=null;return this.windows.forEach((t=>{null!=t&&t.baseElement.classList.contains("active")&&(e=t)})),e}destroyAll(){this.windows.forEach((e=>{this.destroy(e)})),this.windows=[]}destroy(e){const t=e instanceof g?e:this.findWindow(e);if(!t.wm)return;this.onwindowdestroy?.call(this,t),this.container.removeChild(t.baseElement),t.baseElement=null;const n=this.windows.indexOf(t);this.windows[n]=null,this.windows.splice(n,1)}deactivateAll(){this.windows.forEach(((e,t,n)=>{null!=n[t]&&n[t].baseElement.classList.contains("active")&&(n[t].baseElement.classList.remove("active"),n[t].ondeactivate?.call(),this.onwindowdeactivate?.call(this,n[t]))}))}activate(e){const t=e instanceof g?e:this.findWindow(e);var n=parseInt(t.baseElement.style.zIndex);this.windows.forEach(((e,i,s)=>{if(null==s[i]||s[i].id==t.id)return;s[i].baseElement.classList.contains("active")&&(s[i].baseElement.classList.remove("active"),s[i].ondeactivate?.call(),this.onwindowdeactivate?.call(this,s[i]));const l=parseInt(e.baseElement.style.zIndex);l>n&&(n=l)})),t.baseElement.style.zIndex=n+1,t.baseElement.classList.add("active"),this.onwindowactivate?.call(this,t)}},WM_Window:g};window.WMJS=p})()})();